<% provide(:title, '出勤中社員一覧') %>
<% provide(:class_text, 'user--edit') %>
<% provide(:button_text, '更新する') %>

<div class = "mt-50">
  <h1>出勤中社員一覧</h1>
  <% if @offices.count > 0 %>
    <table class="table table-bordered table-condensed user-table table-text-center">
      <tr>
        <th></th>
        <th></th>
        <th><%= Office.human_attribute_name(:id) %></th>
        <th><%= Office.human_attribute_name(:name) %></th>
        <th><%= Office.human_attribute_name(:office_type) %></th>
      </tr>
        <% @offices.each do |office| %>
          <tr>
            <td>
        		  <h3 class="panel-title">
        		    <a data-toggle="collapse" href="#AccordionCollapse<%= office.id %>">
        			    <button class="btn btn-primary btn-lg">修正</button>
        			  </a>
        		  </h3>
            </td>
            <td>
              <%= link_to "削除", office, method: :delete,
		    	    data: { confirm: "削除してよろしいですか？" },
		    	    class:"btn btn-primary" %>
            </td>
            <td><%= office.id %></td>
            <td><%= office.name %></td>
            <td><%= office.office_type %></td>
          </tr>
          <!--ここからパネルの内容-->
          <tr>
            <td colspan = "5">
              <div id="AccordionCollapse<%= office.id %>" class="panel-collapse collapse">
            		<div class="panel-body">
                  <%= form_with(model: office, url: office_path(office), local: true) do |f| %>

                    <%= f.label :name, class: "label-#{yield(:class_text)}" %>
                    <%= f.text_field :name, class: "form-control" %>
                    <%= f.label :office_type, class: "label-#{yield(:class_text)}" %>
                    <%= f.text_field :office_type, class: "form-control" %>
                    <%= f.submit yield(:button_text), class: "btn btn-primary btn-block btn-#{yield(:class_text)}" %>
                  <% end %>
          		  </div>
          		</div>
            </td>
          </tr>
          <!--ここまでパネルの内容-->
        <% end %>
    </table>
  <% else %>
    <p>拠点はまだありません。拠点情報追加ボタンで登録できます。</p>
  <% end %>

		<div class="panel-group">
	  <div class="panel panel-default">
	    <div class="panel-heading">
		  <h3 class="panel-title">
		    <a data-toggle="collapse" href="#AccordionCollapse">
			  <button class="btn btn-primary btn-lg">拠点情報追加</button>
			</a>
		  </h3>
		</div>
		<div id="AccordionCollapse" class="panel-collapse collapse">
		  <div class="panel-body">
        <%= form_with(model: @office, local:true) do |f| %>
          <%= f.label :name, class: "label-#{yield(:class_text)}" %>
          <%= f.text_field :name, class: "form-control" %>
          <%= f.label :office_type, class: "label-#{yield(:class_text)}" %>
          <%= f.text_field :office_type, class: "form-control" %>
          <%= f.submit yield(:button_text), class: "btn btn-primary btn-block btn-#{yield(:class_text)}" %>
        <% end %>
		  </div>
		</div>
	  </div>
	</div>
  
</div>